<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Devops | Blog của GiangDQ</title>
<meta name="keywords" content="">
<meta name="description" content="Blog về lập trình, công nghệ và kinh nghiệm phát triển phần mềm">
<meta name="author" content="GiangDQ">
<link rel="canonical" href="http://localhost:1313/tags/devops/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.36819bea596090d8b48cf10d9831382996197aa7e4fc86f792f7c08c9ca4d23b.css" integrity="sha256-NoGb6llgkNi0jPENmDE4KZYZeqfk/Ib3kvfAjJyk0js=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/devops/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/devops/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Blog của GiangDQ (Alt + H)">Blog của GiangDQ</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Trang chủ">
                    <span>Trang chủ</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Bài viết">
                    <span>Bài viết</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="Giới thiệu">
                    <span>Giới thiệu</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Lưu trữ">
                    <span>Lưu trữ</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Liên hệ">
                    <span>Liên hệ</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    Devops
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Docker Cơ Bản: Từ Zero Đến Hero
    </h2>
  </header>
  <div class="entry-content">
    <p>Docker đã cách mạng hóa cách chúng ta develop, ship và run applications. Hãy cùng tìm hiểu Docker từ cơ bản nhất!
Docker là gì? Docker là một platform containerization cho phép bạn đóng gói ứng dụng và dependencies của nó vào một container lightweight, portable.
Container vs Virtual Machine ┌─────────────────┐ ┌─────────────────┐│ Application │ │ Application │├─────────────────┤ ├─────────────────┤│ Binaries │ │ Binaries ││ Dependencies │ │ Dependencies │├─────────────────┤ ├─────────────────┤│ Guest OS │ │ │├─────────────────┤ │ Container ││ Hypervisor │ │ Runtime │├─────────────────┤ ├─────────────────┤│ Host OS │ │ Host OS │└─────────────────┘ └─────────────────┘Virtual Machine Container Cài đặt Docker Windows/Mac 1 2 3 4 5 6 7 8 # Download từ https://docker.com/get-started # Hoặc sử dụng package manager # macOS với Homebrew brew install --cask docker # Windows với Chocolatey choco install docker-desktop Linux (Ubuntu) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # Cập nhật package index sudo apt update # Cài đặt dependencies sudo apt install apt-transport-https ca-certificates curl gnupg lsb-release # Thêm Docker GPG key curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg # Thêm repository echo &#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&#34; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null # Cài đặt Docker sudo apt update sudo apt install docker-ce docker-ce-cli containerd.io # Thêm user vào docker group sudo usermod -aG docker $USER Docker Commands Cơ Bản 1. Images 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # List images docker images docker image ls # Pull image từ registry docker pull nginx docker pull node:18-alpine # Build image từ Dockerfile docker build -t my-app:v1.0 . docker build -t my-app:latest --build-arg NODE_ENV=production . # Remove image docker rmi nginx docker image rm my-app:v1.0 # Inspect image docker image inspect nginx 2. Containers 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 # Run container docker run nginx docker run -d --name my-nginx -p 8080:80 nginx # List containers docker ps # Running containers docker ps -a # All containers # Stop/Start containers docker stop my-nginx docker start my-nginx docker restart my-nginx # Remove container docker rm my-nginx docker rm -f my-nginx # Force remove # Execute commands trong container docker exec -it my-nginx bash docker exec my-nginx ls -la # Xem logs docker logs my-nginx docker logs -f my-nginx # Follow logs 3. Volumes &amp; Networks 1 2 3 4 5 6 7 8 9 # Volumes docker volume create my-volume docker volume ls docker run -v my-volume:/app/data nginx # Networks docker network create my-network docker network ls docker run --network my-network nginx Dockerfile - Tạo Custom Images Basic Dockerfile 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # Base image FROM node:18-alpine # Set working directory WORKDIR /app # Copy package files COPY package*.json ./ # Install dependencies RUN npm ci --only=production # Copy source code COPY . . # Expose port EXPOSE 3000 # Default command CMD [&#34;npm&#34;, &#34;start&#34;] Multi-stage Build 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # Build stage FROM node:18-alpine AS builder WORKDIR /app COPY package*.json ./ RUN npm ci COPY . . RUN npm run build # Production stage FROM nginx:alpine AS production # Copy built files COPY --from=builder /app/dist /usr/share/nginx/html # Copy nginx config COPY nginx.conf /etc/nginx/nginx.conf EXPOSE 80 CMD [&#34;nginx&#34;, &#34;-g&#34;, &#34;daemon off;&#34;] Best Practices cho Dockerfile 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 # ✅ Sử dụng specific version tags FROM node:18.17.0-alpine # ✅ Minimize layers RUN apk add --no-cache \ curl \ git \ &amp;&amp; rm -rf /var/cache/apk/* # ✅ Use .dockerignore # .dockerignore file: node_modules npm-debug.log .git .gitignore README.md .env coverage .nyc_output # ✅ Copy dependencies trước source code COPY package*.json ./ RUN npm ci --only=production COPY . . # ✅ Use non-root user RUN addgroup -g 1001 -S nodejs RUN adduser -S nextjs -u 1001 USER nextjs # ✅ Health checks HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \ CMD curl -f http://localhost:3000/health || exit 1 Docker Compose docker-compose.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 version: &#39;3.8&#39; services: # Frontend frontend: build: context: ./frontend dockerfile: Dockerfile ports: - &#34;3000:3000&#34; environment: - REACT_APP_API_URL=http://localhost:5000 depends_on: - backend volumes: - ./frontend:/app - /app/node_modules # Backend API backend: build: ./backend ports: - &#34;5000:5000&#34; environment: - NODE_ENV=development - DB_HOST=database - DB_PORT=5432 - DB_NAME=myapp - DB_USER=postgres - DB_PASSWORD=password depends_on: - database volumes: - ./backend:/app - /app/node_modules # Database database: image: postgres:15-alpine ports: - &#34;5432:5432&#34; environment: - POSTGRES_DB=myapp - POSTGRES_USER=postgres - POSTGRES_PASSWORD=password volumes: - postgres_data:/var/lib/postgresql/data - ./database/init.sql:/docker-entrypoint-initdb.d/init.sql # Redis Cache redis: image: redis:7-alpine ports: - &#34;6379:6379&#34; command: redis-server --appendonly yes volumes: - redis_data:/data # Nginx Reverse Proxy nginx: image: nginx:alpine ports: - &#34;80:80&#34; volumes: - ./nginx/nginx.conf:/etc/nginx/nginx.conf depends_on: - frontend - backend volumes: postgres_data: redis_data: networks: default: driver: bridge Docker Compose Commands 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # Start services docker-compose up docker-compose up -d # Detached mode docker-compose up --build # Rebuild images # Stop services docker-compose down docker-compose down -v # Remove volumes # Specific services docker-compose up frontend backend docker-compose restart database # Logs docker-compose logs docker-compose logs -f backend # Execute commands docker-compose exec backend bash docker-compose run --rm backend npm test Production Best Practices 1. Security 1 2 3 4 5 6 7 8 9 10 # Use non-root user RUN adduser -D -s /bin/sh appuser USER appuser # Scan for vulnerabilities # docker scan my-app:latest # Use minimal base images FROM alpine:latest FROM scratch # For Go binaries 2. Performance 1 2 3 4 5 6 7 8 9 10 11 # Multi-stage builds FROM node:18-alpine AS builder # ... build steps FROM nginx:alpine AS runtime COPY --from=builder /app/dist /usr/share/nginx/html # Optimize layers RUN apt-get update &amp;&amp; apt-get install -y \ package1 \ package2 \ &amp;&amp; rm -rf /var/lib/apt/lists/* 3. Monitoring 1 2 3 4 5 6 7 8 9 10 # docker-compose.yml services: app: image: my-app healthcheck: test: [&#34;CMD&#34;, &#34;curl&#34;, &#34;-f&#34;, &#34;http://localhost:3000/health&#34;] interval: 30s timeout: 10s retries: 3 start_period: 40s Common Issues &amp; Solutions 1. Port Already in Use 1 2 3 4 5 6 # Tìm process đang sử dụng port lsof -i :3000 netstat -tulpn | grep :3000 # Kill process kill -9 &lt;PID&gt; 2. Permission Issues 1 2 3 # Fix permission issues sudo chown -R $USER:$USER ./project-folder sudo chmod -R 755 ./project-folder 3. Container Keeps Restarting 1 2 3 4 5 6 7 8 # Check logs docker logs &lt;container-name&gt; # Run container interactively docker run -it &lt;image&gt; /bin/sh # Debug with overridden entrypoint docker run -it --entrypoint /bin/sh &lt;image&gt; Kết luận Docker giúp:
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-01-13 00:00:00 +0000 UTC'>January 13, 2025</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;GiangDQ</footer>
  <a class="entry-link" aria-label="post link to Docker Cơ Bản: Từ Zero Đến Hero" href="http://localhost:1313/posts/docker-fundamentals/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Blog của GiangDQ</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
